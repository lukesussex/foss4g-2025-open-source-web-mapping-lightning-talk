<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css"
    />
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }
      #map {
        height: 100vh;
        width: 100vw;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      const workplaces = [
        [
          "Christchurch office",
          "137 Victoria Street, Christchurch",
          -43.52306,
          172.62933,
        ],
        [
          "Wellington office",
          "Level 14/22 Willeston Street Wellington",
          -41.28645,
          174.7768,
        ],
        [
          "Auckland office",
          "70 Shortland Street, Auckland",
          -36.84672,
          174.76904,
        ],
        [
          "Tauranga - The Kollective",
          "145 17th Ave, Tauranga",
          -37.70522,
          176.15016,
        ],
      ];

      const map = new maplibregl.Map({
        container: "map",
        style: "https://demotiles.maplibre.org/style.json",
      });

      // Convert workplaces to bounds for fitBounds
      const bounds = new maplibregl.LngLatBounds();
      workplaces.forEach((workplace) => {
        const [name, address, lat, lon] = workplace;
        bounds.extend([lon, lat]); // [lon, lat] for MapLibre
      });
      map.fitBounds(bounds, { padding: 50 });

      workplaces.forEach((workplace) => {
        const [name, address, lat, lon] = workplace;
        new maplibregl.Marker()
          .setLngLat([lon, lat]) // [lon, lat] for MapLibre
          .setPopup(
            new maplibregl.Popup().setHTML(`<b>${name}</b><br>${address}`)
          )
          .addTo(map);
      });
    </script>
  </body>
</html>
